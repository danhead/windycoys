version: "3.8"
services:
  db:
    image: mariadb:10.8
    container_name: windycoys_db
    volumes:
      - ../.tmp/db:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=${dbRootPassword}
      - MYSQL_PASSWORD=${dbPassword}
      - MYSQL_DATABASE=${dbDatabase}
      - MYSQL_USER=${dbUser}
    restart: unless-stopped
  wordpress:
    image: wordpress:latest
    container_name: windycoys_wordpress
    environment:
      - WORDPRESS_DB_HOST=windycoys_db
      - WORDPRESS_DB_USER=${dbUser}
      - WORDPRESS_DB_PASSWORD=${dbPassword}
      - WORDPRESS_DB_NAME=wordpress
      - WORDPRESS_TABLE_PREFIX=wp_
      - WORDPRESS_DEBUG=1
    volumes:
      - ../.tmp/wp-content:/var/www/html/wp-content
      - ../dist:/var/www/html/wp-content/themes/windycoys
    restart: unless-stopped
    depends_on:
      - db
  browser_sync:
    image: windycoys-browser-sync:latest
    container_name: windycoys_browser_sync
    volumes:
      - ../dist:/usr/src/app/dist
    ports:
      - "3000:3000"
